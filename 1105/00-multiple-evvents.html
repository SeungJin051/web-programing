<!doctype html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Document</title>
	</head>
	<body>
		<h2>통계 분석 도구</h2>
		<label for="dataInput">숫자 배열 입력(쉼표로 구분)</label>
		<input type="text" id="dataInput" placeholder="예 10 20 30 40 50" />

		<h3>계산할 통계 선택:</h3>
		<input type="checkbox" id="avgChkbox" />
		<label for="avgChkbox">평균</label>
		<br />
		<input type="checkbox" id="medChkbox" />
		<label for="medChkbox">중앙값</label>
		<br />
		<input type="checkbox" id="minChkbox" />
		<label for="minChkbox">최소값</label>
		<br />
		<input type="checkbox" id="maxChkbox" />
		<label for="maxChkbox">최댓값</label>
		<br />
		<input type="checkbox" id="stdChkbox" />
		<label for="stdChkbox">표준편차</label>
		<br />
		<br />
		<button id="analyzeBtn">결과 확인</button>
		<button id="clrBtn">결과 삭제</button>

		<h3>결과 :</h3>
		<p id="resTxt"></p>

		<script>
			document
				.getElementById('avgChkbox')
				.addEventListener('change', function () {
					togleCallback('avgChkbox', calculateAverage);
				});

			document
				.getElementById('medChkbox')
				.addEventListener('change', function () {
					togleCallback('medChkbox', calculateAverage);
				});

			document
				.getElementById('minChkbox')
				.addEventListener('change', function () {
					togleCallback('minChkbox', calculateAverage);
				});

			document
				.getElementById('maxChkbox')
				.addEventListener('change', function () {
					togleCallback('maxChkbox', calculateAverage);
				});

			document
				.getElementById('stdChkbox')
				.addEventListener('change', function () {
					togleCallback('stdChkbox', calculateAverage);
				});

			function performAnalysis() {
				const dataInput = document.getElementById('dataInput').value;
				const dataArray = dataInput
					.split(',')
					.map(Number)
					.sort((a, b) => a - b);
			}

			function displayResult(result) {
				const resultText = document.getElementById('resTxt');
				resultText.innerHTML += result;
			}

			function calculateStd() {
				const dataArray = performAnalysis();
			}

			function calculateAverage() {
				const dataArray = performAnalysis();
				const average =
					dataArray.reduce((acc, val) => acc + val, 0) / dataArray.length;
				displayResult(`평균 : ${average.toFixed(2)} <br />`);
			}

			function calculateMedian() {
				const dataArray = performAnalysis();
				const mid = Math.floor(dataArray.length / 2);
				const median =
					dataArray.length % 2 !== 0
						? dataArray[mid]
						: (dataArray[mid - 1] + dataArray[mid]) / 2;
				displayResult(`중앙값 : ${median.toFixed(2)} <br />`);
			}

			function calculateMin() {
				const dataArray = performAnalysis();
				const min = 0;
			}

			clrBtn.onclick = function () {
				const resultText = document.getElementById('resultText');
				result.innerHTML('');
			};

			function togleCallback(checkboxId, callback) {
				const checkbox = document.getElementById(checkboxId);
				const analyzeBtn = document.getElementById(analyzeBtn);

				if (checkbox.checked) {
					analyzeBtn.addEventListener(checkbox, callback);
				} else {
					analyzeBtn.removeEventListener(checkbox, callback);
				}
			}
		</script>
	</body>
</html>
